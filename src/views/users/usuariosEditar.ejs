<!DOCTYPE html>
<html lang="en">
  <!-- head INICIO -->
  <%- include("../partials/head.ejs") %>
  <!-- head FIN -->

  <body>
    <!-- header INICIO -->
    <%- include("../partials/header.ejs") %>
    <!-- header FIN -->

    <main>

      <!-- Banner de categorias y miga de pan -->
      <div class="py-6 bg-img-cover bg-dark bg-overlay-gradient-dark position-relative overflow-hidden mb-4 bg-pos-center-center"
      style="background-image: url(/img/header-banner-laboratorio.png);">
          <div class="container position-relative z-index-20" data-aos="fade-right" data-aos-delay="300">
              <nav aria-label="breadcrumb">
                  <ol class="breadcrumb">
                  <li class="breadcrumb-item breadcrumb-light"><a href="/">Home</a></li>
                  <li class="breadcrumb-item active breadcrumb-light" aria-current="page"><a href="/admin">Administrador</a></li>
                  <li class="breadcrumb-item active breadcrumb-light" aria-current="page">Edicion</li>
                  </ol>
              </nav>                
              <h1 class="fw-bold display-6 mb-4 text-white">Edicion de usuarios</h1>              
              <div class="col-12 col-md-6">
                  <!-- <img style="width:150px ;" src="  < %= usuarioFull.image%>  "> <br> -->
                  <p class="lead text-white mb-0"> Hola <%= locals.usuarioFull.first_name %>  , ya puedes editar este usuario!</p>
              </div>
          </div>
      </div>
      <!-- Banner de categorias -->


      <h1 class="mb-4 display-5 fw-bold text-center"><%=userObj.first_name%></h1>
      <p class="text-center mx-auto">¡Manten actualizados tus usuarios!</p>
          <!-- <p class="text-center mx-auto">Ingresa todos los campos</p> -->
          <div class="border-bottom pb-3"></div>

      <section class="container">        
        <!-- Formulario de login-->

        <div class="row d-flex mt-auto p-1">
          <div class="p-5 sticky-md-top top-10">
              
                        

                <div class="card flex-grow-1 mb-md-0 w-60 mx-auto">
                  <div class="card__content">
                    
                    
                       
                      <form class="form-registro" action="/user/update/<%= userObj.id %>" method="POST" enctype="multipart/form-data" id="">

                      <label for="nombreUsuario" class="form-label">Nombre del usuario</label>
                      <input type="text" class="form-control <%= locals.errors && errors.nombreUsuario ? 'is-invalid' : null %>" name="nombreUsuario" id="nombreUsuario" value='<%=userObj.first_name%>'>
                      <% if (locals.errors && errors.nombreUsuario) { %>                            
                        <p style="color: tomato; font-size: 12px;"> <%= errors.nombreUsuario.msg %> </p> 
                      <% } %>

                      <label for="apellidoUsuario" class="form-label">Apellido de usuario</label>
                      <input type="text" class="form-control <%= locals.errors && errors.apellidoUsuario ? 'is-invalid' : null %>" name="apellidoUsuario" id="apellidoUsuario" value='<%=userObj.last_name%>' minlength="4">
                      <% if (locals.errors && errors.apellidoUsuario) { %>                            
                        <p style="color: tomato; font-size: 12px;"> <%= errors.apellidoUsuario.msg %> </p> 
                      <% } %>

                      
                      <label for="emailUsuario" class="form-label">Email</label>
                      <input type="text" class="form-control <%= locals.errors && errors.emailUsuario ? 'is-invalid' : null %>" name="emailUsuario" id="emailUsuario" value='<%= userObj.email %>'>
                      <% if (locals.errors && errors.emailUsuario) { %>                            
                        <p style="color: tomato; font-size: 12px;"> <%= errors.emailUsuario.msg %></p> 
                        <% } %>
                        
                        <br>
  
                        <div class="card flex-grow-1 mb-md-0 w-60">
                          <select name="categoriaUsuario" id="" required >
                              <option value="" disabled selected >-- Perfil del usuario --</option>
                              <% categoriesUser.forEach(category=> { %>
                              <option value="<%= category.id %>" <% if (userObj.CategoryUser.id==category.id) { %>
                                  <%= 'selected' %>
                                    <% }; %>><%= category.nombre %>
                              </option>
                                <% }); %>
                          </select>
                        </div>

                        <br>                      

                      <label for="AvatarUsuario" class="form-label">Avatar</label>
                      <input type="file" class="form-control" name="AvatarUsuario" id="AvatarUsuario">
                      <% if (locals.errors && errors.AvatarUsuario) { %>                            
                        <p style="color: tomato; font-size: 12px;"> <%= errors.AvatarUsuario.msg %></p> 
                      <% } %>

                      <button class="btn btn-dark mt-4 mb-2" type="submit">Actualizar ahora</button>
                    </form>

                  </div>
                </div>

          </div>                
        </div>



      </section>
    </main>

    <!--vinculación con archivo .js-->
     
    <script src="/js/EditProductValidation.js"></script>

    <!--footer start-->
    <%- include("../partials/footer.ejs") %>
    <!-- main-footer end -->
  </body>
</html>